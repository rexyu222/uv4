var _RFE_module_comment_pangea=webpackJsonp_RFE_module__name_([62],{135:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getUiElements=function(t){return t.querySelectorAll(".comment--pangea")},e.prototype.createUiInstance=function(t){return new s(this,t)},e}(o.c);e.default=i;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hideForm=function(t,e,n){n||e.reset(),t.style.display="none";var o=$dom.descendants(e,".sys-msg")[0];o&&o.removeMessage()},e.hideForms=function(){for(var t=$dom.get(".comments__form--dynamic",e.el),n=0;n<t.length;n++)e.hideForm(t[n],$dom.descendants(t[n],"form")[0],!0)},e.delayedInit=function(){e.instances=e.module.instances},e.actionClick=function(t){t.preventDefault();var n=RFE.hasClass("reply-button",t.target)||RFE.hasClass("report-button",t.target)?t.target:$dom.ancestor(t.target,"a"),o=n.className.split("-")[0];e.displayActionForm(o)},e.displayActionForm=function(t){var n="#comment-"+t+"-"+e.id,o=$dom.descendants(e.el,n);if(e.instances.length)for(var r=0;r<e.instances.length;r++)e.instances[r].hideForms();if(o.length)return void(o[0].style.display="block");e.obtainForm(t,function(t){e.el.appendChild(t),e.formInit()})},e.obtainForm=function(t,n){var o=window.root("/comments/form?commentId="+e.id+"&form="+t);window.ajaxGet(o,null,function(t){if(!t)return void console.error("Connection error.");n(window.createHTML(t))})},e.formInit=function(){var t=$dom.descendants(e.el,"form")[0];RFE.validation.introduceForm(t,function(e){return RFE.isResponseValid(e)?(e.message&&RFE.showSystemMessage(e.message,t),e.status):(RFE.showSystemMessage(t.getAttribute("data-message-connection-error"),t),!1)}),e.prepareCancelClick(t)},e.prepareCancelClick=function(t){var n=$dom.descendants(t,".btn-reset")[0];n&&n.addEventListener("click",e.cancelClickEvent,!1)},e.cancelClickEvent=function(t){var n=$dom.ancestor(t.target,"form"),o=$dom.ancestor(n,"div");RFE.preventDefault(t),e.hideForm(o,n,!1)},e}return r(e,t),e.prototype.init=function(){if(this.id=this.el.id.split("-")[1],this.buttons=this.el.querySelectorAll(".reply-button, .report-button"),!this.buttons)return!1;for(var t=0;t<this.buttons.length;t++)this.buttons[t].addEventListener("click",this.actionClick);return this.timer=setTimeout(this.delayedInit,5),!0},e.prototype.deinit=function(){if(clearTimeout(this.timer),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].removeEventListener("click",this.actionClick)},e}(o.d)}},[135]);
_resourceLoaderReceiver_4();